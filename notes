
///////////////////////////////////////////////////////////////////////

verif docker evaluation


//////////////////////////////////////////////////////////////////////

V√©rifier que quand tu stop tes docker et que tu les relances tes donn√©es sont toujours pr√©sentes 

Pour se faire :
se log avec login.42.fr/wp-admin 
(Soit retourn√© sur la page d‚Äôaccueil et sur le poste, soit dans la page admin) √©crire un commentaire sur un poste ou en cr√©er un nouveau.
Si quand tu red√©marre le commentaire est encore l√† 
Il te reste plus que 2 chose √† v√©rifier :
Si tu a bien 2 user wordpresss (un admin et un autre (ATTENTION PAS DE LOGIN+MDP FACILE))

Et v√©rifier que tout tes mots de passe sont dans le .env que TU NE PUSH PAS et que tu ajoutera √† la main √† chaque correction
V√©rifie aussi si tu peux te connecter √† ton docker mariadb (command docker exec) 
normalement tu ne dois pas pouvoir te co en root sans mot passe (mysqld -h localhost -u root) si ca marche sans -p=$PASSWORD c‚Äôest pas bon
(Pour le modifier je te laisse checker comment Alter Table un User ROOT) 

///////////////////////////////////////////////////////////////////////

Tips VM :
passer en NAT plutot quen bridge
 run alias wp="wp --allow-root"

////////////////////////////////////////////////:
 GENERAL - docker:

////////////////////////////////////////////////

qller dqns le dosier de lappli
lancer docker build . ou par ex docker build -t nginx.

docker image ls


L'option -it que vous avez utilis√©e signifie :
-i : interactif
-t : alloue un pseudo-TTY

//////////////////////////////////////////////////
DOCKERFILE nginx
/////////////////////////////////////////////////////////

   openssl req


üí°
La commande req cr√©e et traite principalement des demandes de certificats au format PKCS#10. Elle peut en outre cr√©er des certificats auto-sign√©s.

RUN mkdir -p /etc/nginx/ssl -  dossier, qui permettra de stocker le certificat et la clef pour une connexion s√©curis√©e


OpenSSL:  l‚Äôoutil principal pour la gestion/cr√©ation de certificat SSL
Nous rajouterons ensuite le mot clef -x509 pour pr√©ciser le type du certificat.

-nodes : eviter la demande de mdp


-out /etc/nginx/ssl/inception.crt -keyout /etc/nginx/ssl/inception.key  :  indiquer √† OpenSSL o√π l‚Äôon souhaite stocker le certificat et la clef de notre SSL en rajoutant les options -out et -keyout

-subj eviter  d‚Äôavoir un prompt qui requiert certaines informations pour le certificat.

   RUN mkdir -p /var/run/nginx :  cr√©er un dossier qui nous permettra de stocker les fichiers de config de NGINX.


   Fonctionnement
Par d√©faut, Nginx s'ex√©cute comme un d√©mon, ce qui signifie qu'il fonctionne en arri√®re-plan.
L'option "-g 'daemon off;'" force Nginx √† rester au premier plan.
Utilit√© dans Docker
Cette configuration est particuli√®rement utile dans un environnement Docker pour plusieurs raisons :
Visibilit√© des logs : En mode premier plan, Nginx affiche ses logs directement dans la console du conteneur, facilitant le d√©bogage.
Gestion des processus : Docker peut mieux surveiller et g√©rer le processus Nginx lorsqu'il est au premier plan.
Arr√™t propre : Cela permet √† Docker d'envoyer correctement les signaux d'arr√™t √† Nginx lors de l'arr√™t du conteneur.

//////////////////////////////////////////////////
DOCKER COMPOSE
/////////////////////////////////////////////////////////

   docker-compose -f  <path_docker_compose>  -d ‚Äîbuild =>  build le docker compose 
   Pour l‚Äôarr√™ter :    docker-compose -f  <path_docker_compose>  stop
   Pour supprimer le build :    docker-compose -f  <path_docker_compose>  down -v

   Si vous rencontrez des probl√®mes avec docker vous pouvez utiliser la commande :

   docker system prune -af